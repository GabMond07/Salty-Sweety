---
// Features-section.astro - Sección de características
---

<section
  class="features-section relative py-20 px-4 md:px-8 lg:px-16 overflow-hidden"
>
  <!-- Gradiente de fondo sutil -->
  <div
    class="absolute inset-0 z-0 pointer-events-none"
    style="background: radial-gradient(ellipse 70% 50% at 30% 20%, rgba(191, 90, 242, 0.15), transparent 70%), radial-gradient(ellipse 60% 40% at 80% 80%, rgba(251, 236, 81, 0.12), transparent 70%), linear-gradient(180deg, var(--background) 0%, rgba(251, 246, 254, 0.8) 100%);"
  >
  </div>

  <!-- Elementos decorativos flotantes -->
  <div class="absolute inset-0 z-5 pointer-events-none overflow-hidden">
    <div
      class="animate-float-slow absolute top-16 left-10 w-2 h-2 bg-[var(--primary)] rounded-full opacity-30"
    >
    </div>
    <div
      class="animate-float-medium absolute top-32 right-20 w-3 h-3 bg-[var(--accent)] rounded-full opacity-25"
    >
    </div>
    <div
      class="animate-float-fast absolute bottom-24 left-1/4 w-2.5 h-2.5 bg-pink-300 rounded-full opacity-20"
    >
    </div>
    <div
      class="animate-pulse-subtle absolute bottom-40 right-1/4 w-4 h-4 border border-[var(--primary)] rounded-full opacity-15"
    >
    </div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto">
    <!-- Título principal -->
    <div class="text-center mb-16">
      <h2
        class="features-title opacity-0 text-4xl md:text-5xl lg:text-6xl text-[var(--foreground)] font-serif mb-4"
        style="font-family: 'Playfair Display', serif;"
      >
        ¿Por qué elegir
      </h2>
      <span
        class="features-subtitle opacity-0 block text-4xl md:text-5xl lg:text-6xl font-serif bg-gradient-to-r from-[var(--primary)] to-[var(--accent)] bg-clip-text text-transparent"
        style="font-family: 'Playfair Display', serif;"
      >
        nuestros postres?
      </span>
    </div>

    <!-- Grid de características -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Feature 1: Hecho con Amor -->
      <div
        class="feature-card opacity-0 text-center p-8 rounded-[var(--radius-lg)] bg-white/10 backdrop-blur-md shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] transition-all duration-300 group cursor-pointer border border-white/20"
      >
        <div
          class="w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-[var(--primary)] to-pink-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg"
        >
          <!-- Heart Icon -->
          <svg
            class="w-8 h-8 text-white"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            ></path>
          </svg>
        </div>

        <h3
          class="text-xl md:text-2xl font-bold mb-4 text-[var(--cardForeground)] group-hover:text-[var(--primary)] transition-colors duration-300"
          style="font-family: 'Poppins', sans-serif;"
        >
          Hecho con Amor
        </h3>

        <p
          class="text-[var(--mutedForeground)] leading-relaxed"
          style="font-family: 'Open Sans', sans-serif;"
        >
          Cada postre es elaborado con pasión y dedicación por nuestros expertos
          pasteleros.
        </p>
      </div>

      <!-- Feature 2: Calidad Premium -->
      <div
        class="feature-card opacity-0 text-center p-8 rounded-[var(--radius-lg)] bg-white/10 backdrop-blur-md shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] transition-all duration-300 group cursor-pointer border border-white/20"
      >
        <div
          class="w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-[var(--accent)] to-yellow-400 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg"
        >
          <!-- Award Icon -->
          <svg
            class="w-8 h-8 text-[var(--accentForeground)]"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 15.39l-3.76 2.27.99-4.28-3.32-2.88 4.38-.38L12 6.09l1.71 4.03 4.38.38-3.32 2.88.99 4.28M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24z"
            ></path>
          </svg>
        </div>

        <h3
          class="text-xl md:text-2xl font-bold mb-4 text-[var(--cardForeground)] group-hover:text-[var(--primary)] transition-colors duration-300"
          style="font-family: 'Poppins', sans-serif;"
        >
          Calidad Premium
        </h3>

        <p
          class="text-[var(--mutedForeground)] leading-relaxed"
          style="font-family: 'Open Sans', sans-serif;"
        >
          Utilizamos solo los mejores ingredientes para garantizar sabores
          excepcionales.
        </p>
      </div>

      <!-- Feature 3: Siempre Fresco -->
      <div
        class="feature-card opacity-0 text-center p-8 rounded-[var(--radius-lg)] bg-white/10 backdrop-blur-md shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] transition-all duration-300 group cursor-pointer border border-white/20"
      >
        <div
          class="w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-blue-400 to-[var(--primary)] flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg"
        >
          <!-- Clock Icon -->
          <svg
            class="w-8 h-8 text-white"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.7L16.2,16.2Z"
            ></path>
          </svg>
        </div>

        <h3
          class="text-xl md:text-2xl font-bold mb-4 text-[var(--cardForeground)] group-hover:text-[var(--primary)] transition-colors duration-300"
          style="font-family: 'Poppins', sans-serif;"
        >
          Siempre Fresco
        </h3>

        <p
          class="text-[var(--mutedForeground)] leading-relaxed"
          style="font-family: 'Open Sans', sans-serif;"
        >
          Preparamos todos nuestros postres diariamente para mantener la
          frescura perfecta.
        </p>
      </div>

      <!-- Feature 4: Experiencia Única -->
      <div
        class="feature-card opacity-0 text-center p-8 rounded-[var(--radius-lg)] bg-white/10 backdrop-blur-md shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] transition-all duration-300 group cursor-pointer border border-white/20"
      >
        <div
          class="w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-pink-400 to-[var(--accent)] flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg"
        >
          <!-- Sparkles Icon -->
          <svg
            class="w-8 h-8 text-[var(--accentForeground)]"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M9,11L12,2L15,11L24,12L15,13L12,22L9,13L0,12L9,11M19,15L22,14L21.5,12.5L22,11L19,12L18,9L16.5,9.5L16,12L18,15L19,15Z"
            ></path>
          </svg>
        </div>

        <h3
          class="text-xl md:text-2xl font-bold mb-4 text-[var(--cardForeground)] group-hover:text-[var(--primary)] transition-colors duration-300"
          style="font-family: 'Poppins', sans-serif;"
        >
          Experiencia Única
        </h3>

        <p
          class="text-[var(--mutedForeground)] leading-relaxed"
          style="font-family: 'Open Sans', sans-serif;"
        >
          Cada bocado es una experiencia sensorial que despertará todos tus
          sentidos.
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  /* ========== ANIMACIONES PARA FEATURES ========== */

  /* Animación del título principal */
  @keyframes featuresTitle {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Animación del subtítulo con gradiente */
  @keyframes featuresSubtitle {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.9);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* Animación de las tarjetas de características */
  @keyframes featureCardIn {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.9);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* Estados activos cuando son visibles */
  .features-title.animate-in {
    animation: featuresTitle 1s ease-out forwards;
  }

  .features-subtitle.animate-in {
    animation: featuresSubtitle 1s ease-out 0.3s forwards;
  }

  .feature-card.animate-in {
    animation: featureCardIn 0.6s ease-out forwards;
  }

  /* Delays escalonados para las tarjetas */
  .feature-card:nth-child(1).animate-in {
    animation-delay: 0.1s;
  }
  .feature-card:nth-child(2).animate-in {
    animation-delay: 0.25s;
  }
  .feature-card:nth-child(3).animate-in {
    animation-delay: 0.4s;
  }
  .feature-card:nth-child(4).animate-in {
    animation-delay: 0.55s;
  }

  /* Mejoras de hover */
  .feature-card {
    backdrop-filter: blur(20px);
    background: linear-gradient(
      145deg,
      rgba(255, 255, 255, 0.1),
      rgba(255, 255, 255, 0.05)
    );
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .feature-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow:
      0 20px 40px rgba(191, 90, 242, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  /* Efecto de pulso sutil en los iconos */
  .feature-card:hover .w-16 {
    box-shadow: 0 0 30px rgba(191, 90, 242, 0.4);
    animation: iconPulse 2s ease-in-out infinite;
  }

  @keyframes iconPulse {
    0%,
    100% {
      transform: scale(1.1);
    }
    50% {
      transform: scale(1.15);
    }
  }

  /* Transiciones suaves */
  .features-title,
  .features-subtitle,
  .feature-card {
    transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
</style>

<script>
  // Intersection Observer para triggear animaciones
  const observerOptions = {
    threshold: 0.15,
    rootMargin: "0px 0px -100px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("animate-in");

        // Una vez animado, dejar de observar
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // Observar elementos que necesitan animación
  const animateElements = document.querySelectorAll(
    ".features-title, .features-subtitle, .feature-card"
  );

  animateElements.forEach((el) => {
    observer.observe(el);
  });

  // Efecto de movimiento sutil con el mouse para las tarjetas
  const cards = document.querySelectorAll(".feature-card");

  cards.forEach((card) => {
    card.addEventListener("mousemove", (e) => {
      const rect = card.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const centerX = rect.width / 2;
      const centerY = rect.height / 2;

      const rotateX = (y - centerY) / 20;
      const rotateY = (centerX - x) / 20;

      card.style.transform = `
        perspective(1000px)
        rotateX(${rotateX}deg)
        rotateY(${rotateY}deg)
        translateZ(10px)
        scale(1.02)
      `;
    });

    card.addEventListener("mouseleave", () => {
      card.style.transform =
        "perspective(1000px) rotateX(0) rotateY(0) translateZ(0) scale(1)";
    });
  });

  // Limpiar al salir de la página
  window.addEventListener("beforeunload", () => {
    observer.disconnect();
  });
</script>
